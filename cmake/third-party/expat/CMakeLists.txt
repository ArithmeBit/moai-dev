cmake_minimum_required ( VERSION 2.8.5 )

project ( expat )

if ( MOAI_EXPAT )

  set ( CMAKE_CURRENT_SOURCE_DIR "${MOAI_ROOT}/3rdparty/expat-2.0.1/lib/" )

  set ( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DMOAI_WITH_EXPAT=1 " PARENT_SCOPE)
  set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DMOAI_WITH_EXPAT=1 " PARENT_SCOPE)

  if ( BUILD_WINDOWS )
    set ( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DHAVE_MEMMOVE=1 -DXML_DTD" PARENT_SCOPE)
  endif (BUILD_WINDOWS)
  
  if ( BUILD_ANDROID ) 
  	set ( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DHAVE_MEMMOVE=1 -DXML_STATIC" PARENT_SCOPE)
  endif (BUILD_ANDROID )

  set ( EXPAT_INCLUDES "${MOAI_ROOT}/3rdparty/expat-2.0.1/lib/" PARENT_SCOPE )

  set ( EXPAT_SOURCES 

    ${CMAKE_CURRENT_SOURCE_DIR}/xmlparse.c
    ${CMAKE_CURRENT_SOURCE_DIR}/xmlrole.c
    ${CMAKE_CURRENT_SOURCE_DIR}/xmltok.c
    ${CMAKE_CURRENT_SOURCE_DIR}/xmltok_impl.c
    ${CMAKE_CURRENT_SOURCE_DIR}/xmltok_ns.c
      
  PARENT_SCOPE )

else ( MOAI_EXPAT )

  set ( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DMOAI_WITH_EXPAT=0" PARENT_SCOPE)
  set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DMOAI_WITH_EXPAT=0" PARENT_SCOPE)

endif ( MOAI_EXPAT )
